<!doctype html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>给 Ketiny 的小网站</title>

<style>
:root{
  --bg1:#070a12;
  --bg2:#0b0f1d;
  --bg3:#11162e;

  --card:rgba(255,255,255,.07);
  --line:rgba(255,255,255,.14);

  --text:#eaf0ff;
  --muted:rgba(234,240,255,.72);

  --pink:#ff6fb1;
  --purple:#b78cff;

  --yellow:#FFE600;                 /* 你给的黄 */
  --today-bg:rgba(255,230,0,.22);   /* 今日淡黄背景 */
  --r:18px;

  /* ====== Hello Kitty 图标（你自己替换文件名/路径即可） ======
     你在网上找一个粉色 Hello Kitty 图标后，
     把 kitty.png 放到同目录，或改成你的图片路径/链接
  */
  --kitty-icon: url("kitty.png");
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Microsoft YaHei",Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(1000px 500px at 10% -10%, rgba(116,178,255,.25), transparent 60%),
    radial-gradient(900px 500px at 90% 10%, rgba(255,111,177,.18), transparent 60%),
    linear-gradient(180deg,var(--bg1),var(--bg2) 50%,var(--bg3));
  min-height:100vh;
}

.container{max-width:1200px;margin:auto;padding:16px}

header{
  position:sticky;top:0;z-index:9;
  backdrop-filter:blur(10px);
  background:rgba(7,10,18,.7);
  border-bottom:1px solid var(--line);
}
.nav{display:flex;align-items:center;gap:10px;font-weight:900}

/* ====== 顶部左上角 Logo：改成 Hello Kitty 图标 ====== */
.logo{
  width:34px;height:34px;border-radius:14px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.18);
  position:relative;
  overflow:hidden;
}
.logo::before{
  content:"";
  position:absolute;inset:0;
  background-image:var(--kitty-icon);
  background-repeat:no-repeat;
  background-position:center;
  background-size:78%;
}

/* ====== tabs ====== */
.tabs{
  display:flex;
  gap:10px;
  justify-content:center;
  padding:10px 0;
  flex-wrap:wrap;
}
.tab{
  padding:10px 18px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  cursor:pointer;
  position:relative;
}
.tab.active{
  background:linear-gradient(135deg,var(--pink),var(--purple));
  color:#111;
  font-weight:900;
}

/* ====== 给两个 tab 头上加蝴蝶结（一个粉色一个蓝色） ====== */
.tab::before{
  content:"";
  position:absolute;
  top:-9px; left:50%;
  transform:translateX(-50%);
  width:22px;height:14px;
  border-radius:10px;
  filter:drop-shadow(0 2px 6px rgba(0,0,0,.35));
  opacity:.95;
}
/* 左边 tab：粉色蝴蝶结 */
.tab:nth-child(1)::before{
  background:
    radial-gradient(circle at 32% 55%, rgba(255,255,255,.55), transparent 58%),
    radial-gradient(circle at 68% 55%, rgba(255,255,255,.55), transparent 58%),
    radial-gradient(circle at 50% 55%, rgba(0,0,0,.25) 0 2px, transparent 3px),
    linear-gradient(135deg, rgba(255,111,177,.95), rgba(255,111,177,.55));
}
/* 右边 tab：蓝色蝴蝶结 */
.tab:nth-child(2)::before{
  background:
    radial-gradient(circle at 32% 55%, rgba(255,255,255,.55), transparent 58%),
    radial-gradient(circle at 68% 55%, rgba(255,255,255,.55), transparent 58%),
    radial-gradient(circle at 50% 55%, rgba(0,0,0,.25) 0 2px, transparent 3px),
    linear-gradient(135deg, rgba(116,178,255,.95), rgba(116,178,255,.55));
}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--r);
  padding:18px;
  margin-top:16px;
}

.section-title{font-size:22px;font-weight:900;margin:0 0 10px}

textarea{
  width:100%;min-height:130px;
  background:rgba(0,0,0,.25);
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  color:var(--text);
  resize:vertical;
}

.btn{
  margin-top:12px;
  padding:10px 18px;
  border-radius:14px;
  border:none;
  background:linear-gradient(135deg,var(--pink),var(--purple));
  font-weight:900;
  cursor:pointer;
  color:#111;
}

/* ===== 合并页：心愿在上，坏情绪在下 ===== */
.stack{display:grid;gap:16px}
.subcard{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  border-radius:16px;
  padding:16px;
}
.subcard h3{
  margin:0 0 10px;
  font-size:18px;
  font-weight:900;
}
.hint{font-size:12px;color:var(--muted);margin:0 0 10px}

/* ===== 班表顶部布局：时间 + 工具条同一行（今日 + 月份） ===== */
.schedule-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:14px;
  flex-wrap:wrap;
}
.leftbox{
  flex:1 1 260px;
  min-width:220px;
}
.worktime{
  font-size:14px;
  line-height:1.9;
  color:var(--muted);
}
.worktime b{color:#fff}

/* 工具条：今日 + 月份 同一行 */
.actionbar{
  flex:0 0 auto;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:10px;
}

/* 今日按钮 */
.today-btn{
  padding:8px 16px;
  border-radius:999px;
  border:none;
  background:linear-gradient(135deg,var(--pink),var(--purple));
  font-weight:900;
  cursor:pointer;
  color:#111;
}

/* 月份下拉 */
.monthmenu{position:relative}
.monthbtn{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:#fff;
  font-weight:900;
  cursor:pointer;
  min-width:160px;

  /* 让箭头贴最右边、空间不浪费 */
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.monthbtn .arrow{
  font-size:20px;         /* 箭头稍微大一点 */
  line-height:1;
  opacity:.9;
}
.monthlist{
  position:absolute;
  right:0;
  top:52px;
  display:none;
  background:rgba(7,10,18,.95);
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  z-index:50;
}
.monthlist.open{display:grid}
.mitem{
  padding:10px 0;
  border-radius:10px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--line);
  color:#fff;
  font-weight:900;
  cursor:pointer;
}
.mitem.active{
  background:linear-gradient(135deg,var(--pink),var(--purple));
  color:#111;
}

/* 周标题（图4风格） */
.weekbar{
  margin-top:16px;
  padding:10px;
  border-radius:14px;
  border:1px solid var(--line);
}
.weekday{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  text-align:center;
  color:var(--muted);
}

/* 日历（图4风格：无框） */
.calendar{
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:14px 8px;
}
.cell{
  text-align:center;
  padding:6px 0;
  border-radius:12px;
}
.cell.empty{visibility:hidden}

/* 今日：淡黄色背景 + 2秒闪一下 */
.cell.today{background:var(--today-bg)}
.cell.flash{box-shadow:0 0 0 2px rgba(255,230,0,.38)}

.dnum{
  font-size:16px;
  font-weight:900;
}
.dshift{
  margin-top:6px;
  font-size:13px;
  font-weight:900;
  white-space:nowrap;
  word-break:keep-all;
}

/* 休息日：N 字体黄色；并且“日期数字”也改成黄色 */
.cell.rest .dnum{color:var(--yellow)}
.dshift.n{color:var(--yellow)}

footer{
  text-align:center;
  margin:30px 0;
  color:var(--muted);
  font-size:12px;
}

/* ===== 粉色 HelloKitty 弹窗：图标同步 ===== */
.modal{
  position:fixed;inset:0;
  display:none;
  align-items:center;justify-content:center;
  background:rgba(0,0,0,.55);
  z-index:999;
  padding:18px;
}
.modal.open{display:flex}
.modal-card{
  width:min(420px, 92vw);
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background:linear-gradient(135deg, rgba(255,111,177,.28), rgba(183,140,255,.18));
  backdrop-filter:blur(10px);
  padding:18px 16px 16px;
  position:relative;
  overflow:hidden;
}
.modal-card::before{
  content:"";
  position:absolute;
  width:120px;height:120px;
  right:-30px;top:-30px;
  background:radial-gradient(circle at 40% 40%, rgba(255,255,255,.35), transparent 60%);
  transform:rotate(18deg);
}
.kitty{
  display:flex;align-items:center;gap:10px;
  margin-bottom:10px;
}
.kitty .face{
  width:34px;height:34px;border-radius:14px;
  background:rgba(255,255,255,.22);
  border:1px solid rgba(255,255,255,.18);
  position:relative;
  overflow:hidden;
}
.kitty .face::before{
  content:"";
  position:absolute;inset:0;
  background-image:var(--kitty-icon);
  background-repeat:no-repeat;
  background-position:center;
  background-size:78%;
}
.kitty-title{
  font-weight:900;
  color:rgba(255,255,255,.92);
}
.modal-msg{
  font-size:14px;
  line-height:1.6;
  color:rgba(255,255,255,.92);
  margin:8px 0 12px;
}
.modal-ok{
  width:100%;
  border:none;
  border-radius:14px;
  padding:10px 14px;
  cursor:pointer;
  font-weight:900;
  background:linear-gradient(135deg,var(--pink),var(--purple));
  color:#111;
}

/* 手机：把“今日”放左边，“月份”放右边，去掉你标的空白感 */
@media (max-width:520px){
  .container{padding:12px}

  .schedule-head{gap:10px}
  .leftbox{min-width:0; flex:1 1 100%}  /* 让左侧信息占满一行，下面工具条再一行 */
  .actionbar{
    width:100%;
    justify-content:space-between;       /* 今日左，月份右 */
  }

  .calendar{gap:12px 8px}
}
</style>
</head>

<body>
<header>
  <div class="container nav">
    <div class="logo" aria-label="Hello Kitty logo"></div>
    给 Ketiny 的小网站
  </div>

  <div class="tabs">
    <div class="tab active" data-p="note">心愿 & 回收站</div>
    <div class="tab" data-p="schedule">班表</div>
  </div>
</header>

<main class="container">

<!-- 合并页：心愿在上，坏情绪在下 -->
<section id="note">
  <div class="card">
    <!-- 你标注的“心愿 & 回收站”大标题：删除（因为顶部 tab 已经有了） -->

    <div class="stack">
      <div class="subcard">
        <h3>心愿单</h3>
        <p class="hint">写下你想要的，我会收到。</p>
        <textarea id="wishText" placeholder="把心愿写在这里…"></textarea>
        <button class="btn" onclick="sendWish()">传递心愿</button>
      </div>

      <div class="subcard">
        <h3>坏情绪回收站</h3>
        <p class="hint">把不开心的写下来，交给我。</p>
        <textarea id="binText" placeholder="把坏情绪写在这里…"></textarea>
        <button class="btn" onclick="sendBin()">消灭</button>
      </div>
    </div>

  </div>
</section>

<section id="schedule" style="display:none">
  <div class="card">
    <div class="schedule-head">
      <div class="leftbox">
        <div class="section-title">班表</div>
        <div class="worktime">
          早班：<b>07:00-15:00</b><br>
          中班：<b>15:00-23:00</b><br>
          晚班：<b>23:00-07:00</b>（前一天23:00开始）<br>
          N：<b>休息</b>
        </div>
      </div>

      <!-- 今日 + 月份：同一行（手机端：今日左，月份右） -->
      <div class="actionbar">
        <button class="today-btn" id="goToday">今日</button>

        <div class="monthmenu">
          <button class="monthbtn" id="monthBtn">
            <span id="monthLabel">2026年 1月</span>
            <span class="arrow">▾</span>
          </button>
          <div class="monthlist" id="monthList"></div>
        </div>
      </div>
    </div>

    <div class="weekbar">
      <div class="weekday">
        <div>日</div><div>一</div><div>二</div><div>三</div><div>四</div><div>五</div><div>六</div>
      </div>
    </div>

    <div class="calendar" id="calendar"></div>
  </div>
</section>

<footer>ketiny越来越好</footer>
</main>

<!-- HelloKitty 粉色弹窗 -->
<div class="modal" id="modal">
  <div class="modal-card">
    <div class="kitty">
      <div class="face"></div>
      <div class="kitty-title" id="modalTitle">提示</div>
    </div>
    <div class="modal-msg" id="modalMsg"></div>
    <button class="modal-ok" id="modalOk">好</button>
  </div>
</div>

<script>
/* ===== Formspree ===== */
const ENDPOINT="https://formspree.io/f/xjgkljor";
const $=id=>document.getElementById(id);

/* 弹窗 */
function openModal(msg, title=""){
  $("modalTitle").textContent = title || "提示";
  $("modalMsg").textContent = msg;
  $("modal").classList.add("open");
}
function closeModal(){
  $("modal").classList.remove("open");
}
$("modalOk").onclick = closeModal;
$("modal").addEventListener("click",(e)=>{
  if(e.target.id==="modal") closeModal();
});

/* ====== 标题规则：
   心愿：心愿单❤️
   坏情绪：坏情绪都走开
*/
function modalTitleByType(type){
  if(type==="心愿") return "心愿单❤️";
  if(type==="坏情绪") return "坏情绪都走开";
  return "提示";
}

async function send(type,text,successMsg){
  const content=(text||"").trim();
  const title = modalTitleByType(type);

  if(!content){
    openModal("内容不能为空喔～", title);
    return false;
  }
  try{
    const res=await fetch(ENDPOINT,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({type,content,time:new Date().toLocaleString()})
    });
    if(!res.ok) throw new Error("HTTP "+res.status);
    openModal(successMsg, title);
    return true;
  }catch(e){
    openModal("发送失败了，请检查网络后再试一次。", title);
    return false;
  }
}

async function sendWish(){
  const ok = await send("心愿",$("wishText").value,"柱子收到你的心愿啦");
  if(ok) $("wishText").value="";
}

async function sendBin(){
  const ok = await send("坏情绪",$("binText").value,"柱子已经收到，马上来帮你铲除坏情绪");
  if(ok) $("binText").value="";
}

/* ===== 排班：严格按你 1月规则延续全年（2026） =====
   2026-01-01 ~ 01-05：早班（5天）
   从 01-06 开始：休2天(N) -> 上6天（中/晚/早轮换）-> 休2天 ...
*/
const rotate=["中班","晚班","早班"];
function shiftOf(d){
  const base=new Date(2026,0,6);
  if(d<=new Date(2026,0,5)) return "早班";
  const diff=Math.floor((d-base)/86400000);
  const cycle=Math.floor(diff/8);
  const pos=diff%8;
  if(pos<2) return "N";
  return rotate[cycle%3];
}

let m=0; // 0-11

function renderMonthList(){
  const list=$("monthList");
  list.innerHTML="";
  for(let i=0;i<12;i++){
    const b=document.createElement("button");
    b.className="mitem"+(i===m?" active":"");
    b.textContent=`${i+1}月`;
    b.onclick=()=>{
      m=i;
      list.classList.remove("open");
      render();
    };
    list.appendChild(b);
  }
}

function render(){
  $("monthLabel").textContent=`2026年 ${m+1}月`;
  renderMonthList();

  const cal=$("calendar");
  cal.innerHTML="";
  const first=new Date(2026,m,1).getDay();
  const days=new Date(2026,m+1,0).getDate();

  for(let i=0;i<first;i++){
    const e=document.createElement("div");
    e.className="cell empty";
    cal.appendChild(e);
  }

  const now=new Date();
  for(let d=1; d<=days; d++){
    const date=new Date(2026,m,d);
    const s=shiftOf(date);

    const c=document.createElement("div");
    c.className="cell";
    if(s==="N") c.classList.add("rest");

    const isToday = (now.getFullYear()===2026 && now.getMonth()===m && now.getDate()===d);
    if(isToday) c.classList.add("today");

    c.innerHTML = `
      <div class="dnum">${d}</div>
      <div class="dshift ${s==="N"?"n":""}">${s}</div>
    `;
    cal.appendChild(c);
  }
}

/* 今日：切到当月 + 高亮2秒 */
$("goToday").onclick=()=>{
  const t=new Date();
  m = (t.getFullYear()===2026) ? t.getMonth() : 0;
  render();
  const el=document.querySelector(".cell.today");
  if(el){
    el.classList.add("flash");
    el.scrollIntoView({behavior:"smooth", block:"center"});
    setTimeout(()=>el.classList.remove("flash"),2000);
  }
};

/* 月份下拉 */
$("monthBtn").onclick=()=>{
  $("monthList").classList.toggle("open");
};
/* 点击空白处关闭 */
document.addEventListener("click",(e)=>{
  const menu=document.querySelector(".monthmenu");
  if(menu && !menu.contains(e.target)){
    $("monthList").classList.remove("open");
  }
});

/* tabs */
document.querySelectorAll(".tab").forEach(t=>{
  t.onclick=()=>{
    ["note","schedule"].forEach(id=>$(id).style.display="none");
    document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    $(t.dataset.p).style.display="block";
  };
});

render();
</script>
</body>
</html>
